(()=>{"use strict";var o={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},d:(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t)};const t=window.wp.hooks,e=window.wp.i18n,r=window.wc.currency;var c=o.n(r);let s={storeCurrency:null,formatProfit:function(o,t,e,r){let c={"%profit%":this.storeCurrency.formatAmount(e),"%profit_percent%":parseFloat(e/t*100).toFixed(2)+"%","%profit_margin%":parseFloat(e/r*100).toFixed(2)+"%"},s=new RegExp(Object.keys(c).join("|"),"gi");return o.replace(s,(function(o){return c[o]}))},setStoreCurrency:function(o){this.storeCurrency=o}};const a=s,_=c()(wcSettings.currency);a.setStoreCurrency(_);const l={getHeaders:function(o){const t=[{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"order_cost",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"order_profit",isNumeric:!0}];let r=[...o.headers,...t];if(alg_wc_cog_analytics_obj.individual_order_costs_enabled){const c=[{label:(0,e.__)("Items cost","cost-of-goods-for-woocommerce"),key:"items_cost",isNumeric:!0},{label:(0,e.__)("Shipping cost","cost-of-goods-for-woocommerce"),key:"shipping_cost",isNumeric:!0},{label:(0,e.__)("Gateway cost","cost-of-goods-for-woocommerce"),key:"gateway_cost",isNumeric:!0},{label:(0,e.__)("Extra cost","cost-of-goods-for-woocommerce"),key:"extra_cost",isNumeric:!0},{label:(0,e.__)("Shipping classes cost","cost-of-goods-for-woocommerce"),key:"shipping_classes_cost",isNumeric:!0}];r=[...o.headers,...c,...t]}return r},getRows:function(o){return o.rows.map(((t,e)=>{const r=o.items.data[e];let c=[{display:_.formatAmount(r.order_cost),value:r.order_cost,type:"currency"},{display:_.formatAmount(r.order_profit),value:r.order_profit,type:"currency"}],s=[...t,...c];if(alg_wc_cog_analytics_obj.individual_order_costs_enabled){let o=[{display:_.formatAmount(r.items_cost),value:r.items_cost,type:"currency"},{display:_.formatAmount(r.shipping_cost),value:r.shipping_cost,type:"currency"},{display:_.formatAmount(r.gateway_cost),value:r.gateway_cost,type:"currency"},{display:_.formatAmount(r.extra_cost),value:r.extra_cost,type:"currency"},{display:_.formatAmount(r.shipping_classes_cost),value:r.shipping_classes_cost,type:"currency"}];s=[...t,...o,...c]}return s}))},init:function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{if(!("orders"===o.endpoint&&o.items&&o.items.data&&o.items.data.length&&alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_orders))return o;const t=[...o.summary,{label:"Profit",value:a.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=t,o.headers=this.getHeaders(o),o.rows=this.getRows(o),o})),(0,t.addFilter)("woocommerce_admin_orders_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.cost_and_profit_totals_enabled_on_orders&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))}},i=c()(wcSettings.currency);a.setStoreCurrency(i);const n=function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{if(!("revenue"===o.endpoint&&o.items&&o.items.data&&o.items.data.length&&alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_revenue))return o;const t=[...o.headers,{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"costs_total",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit_total",isNumeric:!0}],r=o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:i.formatAmount(r.subtotals.costs_total),value:r.subtotals.costs_total,type:"currency"},{display:i.formatAmount(r.subtotals.profit_total),value:r.subtotals.profit_total,type:"currency"}]})),c=[...o.summary,{label:"Profit",value:a.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=c,o.headers=t,o.rows=r,o})),(0,t.addFilter)("woocommerce_admin_revenue_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.cost_and_profit_totals_enabled_on_revenue&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))},m=c()(wcSettings.currency);a.setStoreCurrency(m);const d={init:function(){this.addColumns(),this.addCOGFilter()},addCOGFilter:function(){alg_wc_cog_analytics_obj.filter_enabled_on_stock&&(0,t.addFilter)("woocommerce_admin_stock_report_filters","cost-of-goods-for-woocommerce",(o=>(o.push({label:(0,e.__)("Cost of Goods filter","cost-of-goods-for-woocommerce"),staticParams:["paged","per_page"],param:"alg_cog_stock_filter",showFilters:()=>!0,filters:[{label:(0,e.__)("Disabled","cost-of-goods-for-woocommerce"),value:"all"},{label:(0,e.__)("Products with cost","cost-of-goods-for-woocommerce"),value:"with_cost"}]}),o)))},addColumns:function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{if("stock"!==o.endpoint||!o.items||!o.items.data||!o.items.data.length)return o;const t=[...o.headers];alg_wc_cog_analytics_obj.cost_and_profit_enabled_on_stock&&(t.push({label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"product_cost",isNumeric:!0}),t.push({label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"product_profit",isNumeric:!0})),alg_wc_cog_analytics_obj.category_enabled_on_stock&&t.push({label:(0,e.__)("Category","cost-of-goods-for-woocommerce"),key:"product_cat"});const r=o.rows.map(((t,e)=>{const r=o.items.data[e],c=[...t];return alg_wc_cog_analytics_obj.cost_and_profit_enabled_on_stock&&(c.push({display:m.formatAmount(r.product_cost),value:r.product_cost,type:"currency"}),c.push({display:m.formatAmount(r.product_profit),value:r.product_profit,type:"currency"})),alg_wc_cog_analytics_obj.category_enabled_on_stock&&c.push({display:r.product_cat,value:r.product_cat}),c}));if(alg_wc_cog_analytics_obj.cost_and_profit_enabled_on_stock){let t=alg_wc_cog_analytics_obj.consider_stock_for_calculation?o.totals.cost_with_qty:o.totals.cost,e=alg_wc_cog_analytics_obj.consider_stock_for_calculation?o.totals.profit_with_qty:o.totals.profit;const r=[...o.summary,{label:"Cost",value:m.formatAmount(t)},{label:"Profit",value:m.formatAmount(e)}];o.summary=r}return o.headers=t,o.rows=r,o}))}},f=c()(wcSettings.currency);a.setStoreCurrency(f);const u=function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{const t=new URLSearchParams(window.location.search);if("products"!==o.endpoint||!o.items||!o.items.data||!o.items.data.length||!alg_wc_cog_analytics_obj.product_cost_and_profit_columns_enabled&&"/analytics/products"===t.get("path"))return o;const r=[...o.headers,{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"cost",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit",isNumeric:!0}],c=o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:f.formatAmount(r.cost),value:r.cost,type:"currency"},{display:f.formatAmount(r.profit),value:r.profit,type:"currency"}]})),s=[...o.summary,{label:"Profit",value:a.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=s,o.rows=c,o.headers=r,o})),(0,t.addFilter)("woocommerce_admin_products_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.product_cost_and_profit_totals_enabled&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))},p=c()(wcSettings.currency);a.setStoreCurrency(p);const y=function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{const t=new URLSearchParams(window.location.search);if("variations"!==o.endpoint||!o.items||!o.items.data||!o.items.data.length||!alg_wc_cog_analytics_obj.variation_cost_and_profit_columns_enabled&&"/analytics/variations"===t.get("path"))return o;const r=[...o.headers,{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"cost",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit",isNumeric:!0}],c=o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:p.formatAmount(r.cost),value:r.cost,type:"currency"},{display:p.formatAmount(r.profit),value:r.profit,type:"currency"}]})),s=[...o.summary,{label:"Profit",value:a.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=s,o.rows=c,o.headers=r,o})),(0,t.addFilter)("woocommerce_admin_variations_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.variation_cost_and_profit_totals_enabled&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))},g=c()(wcSettings.currency);a.setStoreCurrency(g);const w=function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{if(!("categories"===o.endpoint&&o.items&&o.items.data&&o.items.data.length&&alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_categories))return o;const t=[...o.headers,{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"cost",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit",isNumeric:!0}],r=o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:g.formatAmount(r.cost),value:r.cost,type:"currency"},{display:g.formatAmount(r.profit),value:r.profit,type:"currency"}]})),c=[...o.summary,{label:"Profit",value:a.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=c,o.rows=r,o.headers=t,o})),(0,t.addFilter)("woocommerce_admin_categories_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.cost_and_profit_totals_enabled_on_categories&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))},b=c()(wcSettings.currency);a.setStoreCurrency(b);const h={init:function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>"customers"===o.endpoint&&o.items&&o.items.data&&o.items.data.length&&alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_orders?(o.headers=this.getHeaders(o),o.rows=this.getRows(o),o):o))},getHeaders:function(o){let t=o.headers;if(alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_customers){const r=[{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"costs_total",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit_total",isNumeric:!0}];t=[...o.headers,...r]}return t},getRows:function(o){return o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:b.formatAmount(r.costs_total),value:r.costs_total,type:"currency"},{display:b.formatAmount(r.profit_total),value:r.profit_total,type:"currency"}]}))}};l.init(),n(),d.init(),u(),y(),w(),h.init()})();