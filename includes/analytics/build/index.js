(()=>{"use strict";var o={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},d:(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t)};const t=window.wp.hooks,e=window.wp.i18n,r=window.wc.currency;var a=o.n(r);let c={storeCurrency:null,formatProfit:function(o,t,e,r){let a={"%profit%":this.storeCurrency.formatAmount(e),"%profit_percent%":parseFloat(e/t*100).toFixed(2)+"%","%profit_margin%":parseFloat(e/r*100).toFixed(2)+"%"},c=new RegExp(Object.keys(a).join("|"),"gi");return o.replace(c,(function(o){return a[o]}))},setStoreCurrency:function(o){this.storeCurrency=o}};const s=c,_=a()(wcSettings.currency);s.setStoreCurrency(_);const l={getHeaders:function(o){const t=[{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"order_cost",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"order_profit",isNumeric:!0}];let r=[...o.headers,...t];if(alg_wc_cog_analytics_obj.individual_order_costs_enabled){const a=[{label:(0,e.__)("Items cost","cost-of-goods-for-woocommerce"),key:"items_cost",isNumeric:!0},{label:(0,e.__)("Shipping cost","cost-of-goods-for-woocommerce"),key:"shipping_cost",isNumeric:!0},{label:(0,e.__)("Gateway cost","cost-of-goods-for-woocommerce"),key:"gateway_cost",isNumeric:!0},{label:(0,e.__)("Extra cost","cost-of-goods-for-woocommerce"),key:"extra_cost",isNumeric:!0},{label:(0,e.__)("Shipping classes cost","cost-of-goods-for-woocommerce"),key:"shipping_classes_cost",isNumeric:!0}];r=[...o.headers,...a,...t]}return r},getRows:function(o){return o.rows.map(((t,e)=>{const r=o.items.data[e];let a=[{display:_.formatAmount(r.order_cost),value:r.order_cost,type:"currency"},{display:_.formatAmount(r.order_profit),value:r.order_profit,type:"currency"}],c=[...t,...a];if(alg_wc_cog_analytics_obj.individual_order_costs_enabled){let o=[{display:_.formatAmount(r.items_cost),value:r.items_cost,type:"currency"},{display:_.formatAmount(r.shipping_cost),value:r.shipping_cost,type:"currency"},{display:_.formatAmount(r.gateway_cost),value:r.gateway_cost,type:"currency"},{display:_.formatAmount(r.extra_cost),value:r.extra_cost,type:"currency"},{display:_.formatAmount(r.shipping_classes_cost),value:r.shipping_classes_cost,type:"currency"}];c=[...t,...o,...a]}return c}))},init:function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{if(!("orders"===o.endpoint&&o.items&&o.items.data&&o.items.data.length&&alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_orders))return o;const t=[...o.summary,{label:"Profit",value:s.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=t,o.headers=this.getHeaders(o),o.rows=this.getRows(o),o})),(0,t.addFilter)("woocommerce_admin_orders_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.cost_and_profit_totals_enabled_on_orders&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))}},i=a()(wcSettings.currency);s.setStoreCurrency(i);const n=function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{if(!("revenue"===o.endpoint&&o.items&&o.items.data&&o.items.data.length&&alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_revenue))return o;const t=[...o.headers,{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"costs_total",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit_total",isNumeric:!0}],r=o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:i.formatAmount(r.subtotals.costs_total),value:r.subtotals.costs_total,type:"currency"},{display:i.formatAmount(r.subtotals.profit_total),value:r.subtotals.profit_total,type:"currency"}]})),a=[...o.summary,{label:"Profit",value:s.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=a,o.headers=t,o.rows=r,o})),(0,t.addFilter)("woocommerce_admin_revenue_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.cost_and_profit_totals_enabled_on_revenue&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))},m=a()(wcSettings.currency);s.setStoreCurrency(m);const u={init:function(){this.addColumns(),this.addCOGFilter()},addCOGFilter:function(){alg_wc_cog_analytics_obj.filter_enabled_on_stock&&(0,t.addFilter)("woocommerce_admin_stock_report_filters","cost-of-goods-for-woocommerce",(o=>(o.push({label:(0,e.__)("Cost of Goods filter","cost-of-goods-for-woocommerce"),staticParams:["paged","per_page"],param:"alg_cog_stock_filter",showFilters:()=>!0,filters:[{label:(0,e.__)("Disabled","cost-of-goods-for-woocommerce"),value:"all"},{label:(0,e.__)("Cost of Goods products","cost-of-goods-for-woocommerce"),value:"cog_products"}]}),o)))},addColumns:function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{if("stock"!==o.endpoint||!o.items||!o.items.data||!o.items.data.length)return o;const t=[...o.headers];alg_wc_cog_analytics_obj.extra_data&&(t.push({label:(0,e.__)("Price","cost-of-goods-for-woocommerce"),key:"product_price",isNumeric:!0}),t.push({label:(0,e.__)("Total Price","cost-of-goods-for-woocommerce"),key:"product_price_total",isNumeric:!0})),alg_wc_cog_analytics_obj.cost_and_profit_enabled_on_stock&&(t.push({label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"product_cost",isNumeric:!0}),t.push({label:(0,e.__)("Total Cost","cost-of-goods-for-woocommerce"),key:"product_cost_total",isNumeric:!0}),t.push({label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"product_profit",isNumeric:!0}),t.push({label:(0,e.__)("Total Profit","cost-of-goods-for-woocommerce"),key:"product_profit_total",isNumeric:!0})),alg_wc_cog_analytics_obj.extra_data&&t.push({label:(0,e.__)("Category","cost-of-goods-for-woocommerce"),key:"product_cat"});const r=o.rows.map(((t,e)=>{const r=o.items.data[e],a=[...t];return alg_wc_cog_analytics_obj.extra_data&&(a.push({display:m.formatAmount(r.product_price),value:r.product_price,type:"currency"}),a.push({display:m.formatAmount(r.product_price_total),value:r.product_price_total,type:"currency"})),alg_wc_cog_analytics_obj.cost_and_profit_enabled_on_stock&&(a.push({display:m.formatAmount(r.product_cost),value:r.product_cost,type:"currency"}),a.push({display:m.formatAmount(r.product_cost_total),value:r.product_cost_total,type:"currency"}),a.push({display:m.formatAmount(r.product_profit),value:r.product_profit,type:"currency"}),a.push({display:m.formatAmount(r.product_profit_total),value:r.product_profit_total,type:"currency"})),alg_wc_cog_analytics_obj.extra_data&&a.push({display:r.product_cat,value:r.product_cat}),a}));if(alg_wc_cog_analytics_obj.cost_and_profit_enabled_on_stock){let t=o.totals.cost,e=o.totals.profit,r=o.totals.total_cost,a=o.totals.total_profit;const c=[...o.summary,{label:"Cost",value:m.formatAmount(t)},{label:"Total cost",value:m.formatAmount(r)},{label:"Profit",value:m.formatAmount(e)},{label:"Total profit",value:m.formatAmount(a)}];o.summary=c}if(alg_wc_cog_analytics_obj.extra_data){let t=o.totals.price,e=o.totals.total_price,r=o.totals.total_stock,a=o.totals.total_products,c=o.totals.average_cost,s=o.totals.average_price,_=o.totals.average_profit;const l=[...o.summary,{label:"Price",value:m.formatAmount(t)},{label:"Total price",value:m.formatAmount(e)},{label:"Total stock",value:r},{label:"Total products",value:a},{label:"Total average cost",value:m.formatAmount(c)},{label:"Total average price",value:m.formatAmount(s)},{label:"Total average profit",value:m.formatAmount(_)}];o.summary=l}return o.headers=t,o.rows=r,o}))}},d=a()(wcSettings.currency);s.setStoreCurrency(d);const f=function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{const t=new URLSearchParams(window.location.search);if("products"!==o.endpoint||!o.items||!o.items.data||!o.items.data.length||!alg_wc_cog_analytics_obj.product_cost_and_profit_columns_enabled&&"/analytics/products"===t.get("path"))return o;const r=[...o.headers,{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"cost",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit",isNumeric:!0}],a=o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:d.formatAmount(r.cost),value:r.cost,type:"currency"},{display:d.formatAmount(r.profit),value:r.profit,type:"currency"}]})),c=[...o.summary,{label:"Profit",value:s.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=c,o.rows=a,o.headers=r,o})),(0,t.addFilter)("woocommerce_admin_products_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.product_cost_and_profit_totals_enabled&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))},p=a()(wcSettings.currency);s.setStoreCurrency(p);const y=function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{const t=new URLSearchParams(window.location.search);if("variations"!==o.endpoint||!o.items||!o.items.data||!o.items.data.length||!alg_wc_cog_analytics_obj.variation_cost_and_profit_columns_enabled&&"/analytics/variations"===t.get("path"))return o;const r=[...o.headers,{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"cost",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit",isNumeric:!0}],a=o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:p.formatAmount(r.cost),value:r.cost,type:"currency"},{display:p.formatAmount(r.profit),value:r.profit,type:"currency"}]})),c=[...o.summary,{label:"Profit",value:s.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=c,o.rows=a,o.headers=r,o})),(0,t.addFilter)("woocommerce_admin_variations_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.variation_cost_and_profit_totals_enabled&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))},g=a()(wcSettings.currency);s.setStoreCurrency(g);const w=function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>{if(!("categories"===o.endpoint&&o.items&&o.items.data&&o.items.data.length&&alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_categories))return o;const t=[...o.headers,{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"cost",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit",isNumeric:!0}],r=o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:g.formatAmount(r.cost),value:r.cost,type:"currency"},{display:g.formatAmount(r.profit),value:r.profit,type:"currency"}]})),a=[...o.summary,{label:"Profit",value:s.formatProfit(alg_wc_cog_analytics_obj.profit_template,o.totals.costs_total,o.totals.profit_total,o.totals.net_revenue)}];return o.summary=a,o.rows=r,o.headers=t,o})),(0,t.addFilter)("woocommerce_admin_categories_report_charts","cost-of-goods-for-woocommerce",(o=>(alg_wc_cog_analytics_obj.cost_and_profit_totals_enabled_on_categories&&(o=[...o,{key:"costs_total",label:(0,e.__)("Costs total","cost-of-goods-for-woocommerce"),type:"currency"},{key:"profit_total",label:(0,e.__)("Profit total","cost-of-goods-for-woocommerce"),type:"currency"}]),o)))},b=a()(wcSettings.currency);s.setStoreCurrency(b);const h={init:function(){(0,t.addFilter)("woocommerce_admin_report_table","cost-of-goods-for-woocommerce",(o=>"customers"===o.endpoint&&o.items&&o.items.data&&o.items.data.length&&alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_orders?(o.headers=this.getHeaders(o),o.rows=this.getRows(o),o):o))},getHeaders:function(o){let t=o.headers;if(alg_wc_cog_analytics_obj.cost_and_profit_columns_enabled_on_customers){const r=[{label:(0,e.__)("Cost","cost-of-goods-for-woocommerce"),key:"costs_total",isNumeric:!0},{label:(0,e.__)("Profit","cost-of-goods-for-woocommerce"),key:"profit_total",isNumeric:!0}];t=[...o.headers,...r]}return t},getRows:function(o){return o.rows.map(((t,e)=>{const r=o.items.data[e];return[...t,{display:b.formatAmount(r.costs_total),value:r.costs_total,type:"currency"},{display:b.formatAmount(r.profit_total),value:r.profit_total,type:"currency"}]}))}};l.init(),n(),u.init(),f(),y(),w(),h.init()})();